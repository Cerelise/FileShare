<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/css/common.css" />
		<link rel="stylesheet" href="/font-awesome-4.7.0/css/font-awesome.css" />
		<title>首页</title>
	</head>
	<body>
		<div class="login-box">
			<h1>Login</h1>
			<form>
				<div class="inputBox">
					<i class="fa fa-user-circle-o"></i>
					<input type="text" id="name" placeholder="Username" />
				</div>
				<div class="inputBox">
					<i class="fa fa-key" aria-hidden="true"></i>
					<input type="password" id="password" placeholder="Password" />
				</div>
				<button class="login" type="button" onclick="login()">登录</button>
				<button class="register" type="button" onclick="toRegister()">
					注册
				</button>
			</form>
		</div>
		<script src="/js/jquery.js"></script>
		<script>
			function login() {
				let username = $('#name').val()
				let password = $('#password').val()
				if (username.length == 0 || password.length == 0) {
					alert('表单尚未填写完整!')
					return
				}
				$.ajax({
					url: '/loginpost',
					data: { name: $('#name').val(), password: $('#password').val() },
					type: 'post',
					async: 'false',
					dataType: 'json',
					success: function (data) {
						// console.log(data)
						alert(data.msg)
						if (data.flag) {
							window.location.href = '/index'
						}
					},
				})
			}
			function toRegister() {
				window.location.href = '/register'
			}
		</script>
	</body>
</html>
